(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(30),s=a.n(n),c=(a(21),a(10)),l=a(0),o=function(e){var t=e.title,a=e.icon;return Object(l.jsxs)("div",{className:"navbar bg-primary",children:[Object(l.jsxs)("h1",{children:[" ",Object(l.jsx)("i",{className:a}),"  ",t,"  "]}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(c.b,{to:"/",children:"Home "})}),Object(l.jsx)("li",{children:Object(l.jsx)(c.b,{to:"/about",children:"About "})}),Object(l.jsx)("li",{children:Object(l.jsx)(c.b,{to:"/register",children:"Register "})}),Object(l.jsx)("li",{children:Object(l.jsx)(c.b,{to:"/login",children:"Login "})})]})]})},i=a(2);var j=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:" Home page"})})},d=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:" About this Application "}),Object(l.jsx)("p",{className:"my-1",children:"This is a full stack React app"}),Object(l.jsx)("p",{className:"bg-dark p",children:Object(l.jsx)("strong",{children:" React app "})})]})},u=a(12),b=a(4),p=a(9),O=Object(r.createContext)(),m=Object(r.createContext)();var h=function(){var e=Object(r.useContext)(O),t=Object(r.useContext)(m),a=t.register,n=t.error,s=t.clearErrors;Object(r.useEffect)((function(){"User already exist"===n&&(c(n,"danger"),s())}),[n]);var c=e.addAlert,o=Object(r.useState)({name:"",email:"",password:"",password2:""}),i=Object(p.a)(o,2),j=i[0],d=i[1],h=j.name,x=j.email,g=j.password,f=j.password2,v=function(e){return d(Object(b.a)(Object(b.a)({},j),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(l.jsxs)("div",{className:"form-container",children:[Object(l.jsxs)("h1",{children:["User ",Object(l.jsx)("span",{className:"text-primary",children:" Register "})]}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===h||""===x||""===g?c("please enter all the fields","danger"):g!==f?c("password do not match","danger"):(console.log("Register user"),a({name:h,email:x,password:g}))},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"name",children:"name"}),Object(l.jsx)("input",{type:"text",name:"name",value:h,onChange:v})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(l.jsx)("input",{type:"email",name:"email",value:x,onChange:v})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",name:"password",value:g,onChange:v})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(l.jsx)("input",{type:"password",name:"password2",value:f,onChange:v})]}),Object(l.jsx)("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"})]})]})},x=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(p.a)(e,2),a=t[0],n=t[1],s=a.email,c=a.password,o=function(e){return n(Object(b.a)(Object(b.a)({},a),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(l.jsxs)("div",{className:"form-container",children:[Object(l.jsxs)("h1",{children:["User ",Object(l.jsx)("span",{className:"text-primary",children:" Login "})]}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Login user")},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(l.jsx)("input",{type:"email",name:"email",value:s,onChange:o})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",name:"password",value:c,onChange:o})]}),Object(l.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})]})]})},g=a(20),f=a.n(g),v=a(32),y=function(e,t){switch(t.type){case"REGISTER_SUCCESS":return console.log("hey ",t.payload.token),localStorage.setItem("token",t.payload.token),Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(b.a)(Object(b.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case"CLEAR_ERRORS":return Object(b.a)(Object(b.a)({},e),{},{error:null});default:return e}},R=a(33),E=a.n(R),w=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null,error:null},a=Object(r.useReducer)(y,t),n=Object(p.a)(a,2),s=n[0],c=n[1],o=function(){var e=Object(v.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,E.a.post("/user/register",t,a);case 4:r=e.sent,c({type:"REGISTER_SUCCESS",payload:r.data}),console.log(r.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)(m.Provider,{value:{token:s.token,isAuthenticated:s.isAuthenticated,loading:s.loading,user:s.user,error:s.error,register:o,clearErrors:function(){return c({type:"CLEAR_ERRORS"})}},children:e.children})},A=a(34),C=function(e,t){switch(t.type){case"ADD_ALERT":return[].concat(Object(A.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==t.payload}));default:return e}},N=a(69),S=function(e){var t=Object(r.useReducer)(C,[]),a=Object(p.a)(t,2),n=a[0],s=a[1];return Object(l.jsx)(O.Provider,{value:{alerts:n,addAlert:function(e,t){var a=Object(N.a)();s({type:"ADD_ALERT",payload:{msg:e,type:t,id:a}}),setTimeout((function(){return s({type:"REMOVE_ALERT",payload:a})}),5e3)}},children:e.children})},k=function(){var e=Object(r.useContext)(O);return console.log(e),e.alerts.length>0&&e.alerts.map((function(e){return Object(l.jsxs)("div",{className:"alert alert-".concat(e.type),children:[Object(l.jsx)("i",{className:"fas fa-info-circle"})," ",e.msg]},e.id)}))},L=function(){return Object(l.jsx)(w,{children:Object(l.jsx)(S,{children:Object(l.jsx)(c.a,{children:Object(l.jsxs)(r.Fragment,{children:[Object(l.jsx)(o,{title:"Fullstack App",icon:"fab fa-node-js"}),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(k,{}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"/",component:j,exact:!0}),Object(l.jsx)(i.a,{path:"/about",component:d}),Object(l.jsx)(i.a,{path:"/register",component:h}),Object(l.jsx)(i.a,{path:"/login",component:x})]})]})]})})})})};s.a.render(Object(l.jsx)(L,{}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.d698e688.chunk.js.map